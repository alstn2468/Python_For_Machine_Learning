
Chapter 5<br/>
< Numerical Python - Numpy >
===============================


### 코드로 방정식 표현하기
- 2x₁ + 2x₂ + x₃ = 9<br/>
2x₁ - x₂ + 2x₃ = 6<br/>
x₁ - x₂ + 2x₃ = 5
- [2 2 1 9]<br/>
[2 -1 2 5]<br/>
[1 -1 2 5]

```python
coefficient_matrix = [[2, 2, 1], [2, -1, 2], [1, -1, 2]]
constant_vector = [9, 6, 5]
```

- 다양한 Matrix 계산을 어떻게 만들 것인가?
- 굉장히 큰 Matrix에 대한 표현
- 처리 속도 문제 -> 파이썬은 Interpreter 언어
> 적절한 패키지를 활용하는 것은 좋은 방법


### 파이썬 과학 처리 패키지 : Numpy
- Numerical Python
- 파이썬의 고성능 과학 계산용 패키지
- Matrix와 Vector와 같은 Array연산의 사실상 표준
- 한굴로 넘파이로 주로 통칭



### Numpy 특징
- 일반 `List`에 비해 빠르고, 메모리 효율적
- 반복문 없이 데이터 배열에 대한 처리 지원
- 선형대수와 관련된 다양한 기능 제공
- C, C++, 포트란 등의 언어와 통합 가능


### import


```python
import numpy as np
```

- `numpy`의 호출 방법
- 일반적으로 `numpy는 `np`라는 별칭을 이용해서 호출
- 특별한 이유는 없다.

### Array creation


```python
test_array = np.array([1, 4, 5, 8], float)
print(test_array)
print(type(test_array[3]))
```

    [ 1.  4.  5.  8.]
    <class 'numpy.float64'>


- `numpy`는 `np.array()`함수를 활용하여 배열을 생성 -> ndarray
- `numpy`는 하나의 데이터 타입만 배열에 넣을 수 있다.
- `List`와 가장 큰 차이점, Dynamic typing not supported
- C의 Array를 사용하여 배열을 생성


```python
print(test_array.dtype)
print(test_array.shape)
```

    float64
    (4,)


- shape : numpy array의 objectdml dimension 구성을 반환
- dtype : numpy array의 데이터 type을 반환


### Array shape (vector)
- Array(vector, matrix, tensor)의 크기, 형태 등에 대한 정보


```python
test_array = np.array([1, 4, 5, '8'], float)
print(test_array)
print(test_array.shape)
```

    [ 1.  4.  5.  8.]
    (4,)


### Array shape (matrix)


```python
matrix = [[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]]
print(np.array(matrix, int).shape)
```

    (3, 4)


### Array shape (3rd order tensor)


```python
tensor = [[[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]],
          [[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]],
          [[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]],
          [[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]]]
print(np.array(tensor, int).shape)
```

    (4, 3, 4)


### Array shape (ndim & size)
- ndim : number of dimension
- size : data의 개수


```python
tensor = [[[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]],
          [[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]],
          [[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]],
          [[1, 2, 5, 8], [1, 2, 5, 8], [1, 2, 5, 8]]]
```


```python
print(np.array(tensor, int).ndim)
```

    3



```python
print(np.array(tensor, int).size)
```

    48


### Array dtype
- Ndarray의 single element가 가지는 data type
- 각 element가 차지하는 memory의 크기가 결정
- C의 data type과 compatible


```python
np.array([[1, 2, 3], [4.5, 5, 6]], dtype = int)
```




    array([[1, 2, 3],
           [4, 5, 6]])




```python
np.array([[1, 2, 3], [4.5, '5', '6']], dtype = np.float32)
```




    array([[ 1. ,  2. ,  3. ],
           [ 4.5,  5. ,  6. ]], dtype=float32)



- nbytes : ndarray object의 메모리 크기를 반환


```python
np.array([[1, 2, 3], [4.5, '5', '6']], dtype = np.float32).nbytes
```




    24




```python
np.array([[1, 2, 3], [4.5, '5', '6']], dtype = np.int8).nbytes
```




    6




```python
np.array([[1, 2, 3], [4.5, '5', '6']], dtype = np.float64).nbytes
```




    48



### reshape
- Array의 shape의 크기를 변경(element의 갯수는 동일)
- Array의 size만 같다면 다차원으로 자유로이 변형 가능


```python
test_matrix = [[1, 2, 3, 4], [1, 2, 5, 8]]
np.array(test_matrix).shape
```




    (2, 4)




```python
np.array(test_matrix).reshape(8,).shape
```




    (8,)




```python
np.array(test_matrix).reshape(2, 4).shape
```




    (2, 4)



- -1 : size를 기반으로 row 개수 선정


```python
np.array(test_matrix).reshape(-1, 2).shape
```




    (4, 2)




```python
np.array(test_matrix).reshape(2, 2, 2)
```




    array([[[1, 2],
            [3, 4]],
    
           [[1, 2],
            [5, 8]]])




```python
np.array(test_matrix).reshape(2, 2, 2).shape
```




    (2, 2, 2)



### flatten
- 다차원 array를 1차원 array로 변환


```python
test_matrix = [[[1, 2, 3, 4], [1, 2, 5, 8]], [[1, 2, 3, 4], [1, 2, 5, 8]]]
np.array(test_matrix).flatten()
```




    array([1, 2, 3, 4, 1, 2, 5, 8, 1, 2, 3, 4, 1, 2, 5, 8])



### indexing
- `List`와 달리 이차원 배열에서 [0, 0]과 같은 표기법 제공
- Matrix일 경우 앞은 row 뒤는 column을 의미


```python
a = np.array([[1, 2, 3], [4.5, 5, 6]], int)
a
```




    array([[1, 2, 3],
           [4, 5, 6]])




```python
print(a[0, 0])
print(a[0][0])
```

    1
    1



```python
a[0, 0] = 12
a
```




    array([[12,  2,  3],
           [ 4,  5,  6]])




```python
a[0][0] = 5
a
```




    array([[5, 2, 3],
           [4, 5, 6]])



### slicing
- `List`와 달리 행과 열 부분을 나눠서 slicing 가능
- Matrix의 부분 집합을 추출할 때 사용


```python
a = np.array([[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]], int)
a[:2:]
```




    array([[ 1,  2,  3,  4,  5],
           [ 6,  7,  8,  9, 10]])




```python
a[1,1:3]
```




    array([7, 8])




```python
a[1:3]
```




    array([[ 6,  7,  8,  9, 10]])




```python
test_example = np.array([[1, 2, 5, 8],
                         [1, 2, 5, 8],
                         [1, 2, 5, 8],
                         [1, 2, 5, 8],], int)
test_example[:2:]
```




    array([[1, 2, 5, 8],
           [1, 2, 5, 8]])




```python
test_example[:, 1:3]
```




    array([[2, 5],
           [2, 5],
           [2, 5],
           [2, 5]])




```python
test_example[1, :2]
```




    array([1, 2])




```python
test_example[:, ::2]
```




    array([[1, 5],
           [1, 5],
           [1, 5],
           [1, 5]])




```python
test_example[::2, ::3]
```




    array([[1, 8],
           [1, 8]])



### arange

- array의 범위를 지정하여 값의 `List`를 생성하는 명령어


```python
np.arange(30)
```




    array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
           17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29])




```python
np.arange(0, 5, 0.5)
```




    array([ 0. ,  0.5,  1. ,  1.5,  2. ,  2.5,  3. ,  3.5,  4. ,  4.5])




```python
np.arange(30).reshape(5, 6)
```




    array([[ 0,  1,  2,  3,  4,  5],
           [ 6,  7,  8,  9, 10, 11],
           [12, 13, 14, 15, 16, 17],
           [18, 19, 20, 21, 22, 23],
           [24, 25, 26, 27, 28, 29]])


